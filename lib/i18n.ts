import { Role } from "@prisma/client";

export type Locale = "ar" | "en";

const dict = {
  ar: {
    appName: "CheckIn",
    login: "تسجيل الدخول",
    email: "البريد الإلكتروني",
    password: "كلمة المرور",
    signIn: "دخول",
    logout: "خروج",
    dashboard: "لوحة المتابعة",
    onboarding: "إعدادات العنبر",
    dailyEntry: "إدخال يومية",
    sensors: "قراءات الحساسات",
    users: "المستخدمون",
    save: "حفظ",
    barnName: "اسم العنبر",
    barnCode: "كود العنبر",
    capacity: "السعة (عدد)",
    area: "المساحة (م²)",
    cycle: "الدورة",
    chickType: "نوع الكتكوت",
    startDate: "تاريخ البداية",
    expectedDays: "مدة الدورة (يوم)",
    initialChicks: "عدد الكتاكيت",
    chickPrice: "سعر الكتكوت",
    feedPrice: "سعر العلف (للـ kg)",
    targets: "الأهداف",
    targetMortality: "نفوق مستهدف (%)",
    targetFcr: "FCR مستهدف",
    thresholds: "حدود التنبيهات",
    tempMin: "أقل حرارة (°C)",
    tempMax: "أعلى حرارة (°C)",
    humMin: "أقل رطوبة (%)",
    humMax: "أعلى رطوبة (%)",
    ammoniaMax: "أعلى أمونيا (ppm)",
    activeCycle: "الدورة النشطة",
    dayAge: "عمر الدورة (يوم)",
    currentBirds: "عدد الطيور الحالية",
    mortalityToday: "النافق اليومي",
    mortalityTotal: "النافق التراكمي",
    mortalityPct: "نسبة النفوق",
    feedToday: "علف اليوم (kg)",
    feedTotal: "إجمالي العلف (kg)",
    avgWeight: "متوسط الوزن (جم)",
    costs: "التكاليف",
    chickCost: "تكلفة الكتاكيت",
    feedCost: "تكلفة العلف",
    medCost: "تكلفة العلاج",
    totalCost: "إجمالي التكلفة",
    notes: "ملاحظات",
    recordDate: "تاريخ اليوم",
    medicationName: "اسم الدواء",
    addMedication: "إضافة علاج",
    timestamp: "الوقت",
    temperature: "الحرارة (°C)",
    humidity: "الرطوبة (%)",
    ammonia: "الأمونيا (ppm)",
    role: "الدور",
    name: "الاسم",
    createUser: "إضافة مستخدم",
    language: "اللغة",
    adminOnlyEnglish: "الإنجليزية متاحة للأدمن فقط",
    alerts: "تنبيهات",
    ok: "طبيعي",
    warning: "تحذير",
    danger: "خطر",
    noActiveCycle: "لا توجد دورة نشطة. ابدأ من صفحة الإعدادات."
  },
  en: {
    appName: "CheckIn",
    login: "Sign in",
    email: "Email",
    password: "Password",
    signIn: "Sign in",
    logout: "Logout",
    dashboard: "Dashboard",
    onboarding: "Barn Setup",
    dailyEntry: "Daily Entry",
    sensors: "Sensor Readings",
    users: "Users",
    save: "Save",
    barnName: "Barn name",
    barnCode: "Barn code",
    capacity: "Capacity (birds)",
    area: "Area (m²)",
    cycle: "Cycle",
    chickType: "Chick type",
    startDate: "Start date",
    expectedDays: "Expected days",
    initialChicks: "Initial chicks",
    chickPrice: "Chick price",
    feedPrice: "Feed price (per kg)",
    targets: "Targets",
    targetMortality: "Target mortality (%)",
    targetFcr: "Target FCR",
    thresholds: "Alert thresholds",
    tempMin: "Temp min (°C)",
    tempMax: "Temp max (°C)",
    humMin: "Humidity min (%)",
    humMax: "Humidity max (%)",
    ammoniaMax: "Ammonia max (ppm)",
    activeCycle: "Active cycle",
    dayAge: "Cycle age (days)",
    currentBirds: "Current birds",
    mortalityToday: "Mortality today",
    mortalityTotal: "Mortality total",
    mortalityPct: "Mortality %",
    feedToday: "Feed today (kg)",
    feedTotal: "Feed total (kg)",
    avgWeight: "Avg weight (g)",
    costs: "Costs",
    chickCost: "Chicks cost",
    feedCost: "Feed cost",
    medCost: "Medication cost",
    totalCost: "Total cost",
    notes: "Notes",
    recordDate: "Record date",
    medicationName: "Medication name",
    addMedication: "Add medication",
    timestamp: "Timestamp",
    temperature: "Temperature (°C)",
    humidity: "Humidity (%)",
    ammonia: "Ammonia (ppm)",
    role: "Role",
    name: "Name",
    createUser: "Create user",
    language: "Language",
    adminOnlyEnglish: "English is available only for Admin",
    alerts: "Alerts",
    ok: "OK",
    warning: "Warning",
    danger: "Danger",
    noActiveCycle: "No active cycle. Please start from setup page."
  }
} as const;

export function getLocaleForRole(userRole: Role, requested?: string | null): Locale {
  if (userRole === "ADMIN") return (requested === "en" ? "en" : "ar");
  return "ar";
}

export function t(locale: Locale, key: keyof typeof dict["ar"]) {
  return (dict[locale] as any)[key] ?? (dict.ar as any)[key] ?? String(key);
}
